grammar org.xtext.smokingtext.diagramclass.DiagramClass with org.eclipse.xtext.common.Terminals

generate diagramClass "http://www.xtext.org/smokingtext/diagramclass/DiagramClass"

Model:
	greetings+=Package*;

Elements:
  Class | Interface | Abstract | Enumeration
;

Class:
	ClassVisibility classname= ID (":")? extension = ID? implements= Implements* "{"
		body += (Attribute | Method | Dependancy)*
	"}"
;

Implements:
	(",")? ID
;
Dependancy:
	"->" name = ID
;

Enumeration:
	ClassVisibility "e" classname = ID '{'
		(ID (",")?)*	
	'}'
;

Interface:
	ClassVisibility "i" methodname = ID '{'
		(body += (Method)*)*	
	'}'
;

Abstract: 
	ClassVisibility "a" classname = ID (":")? extension = ID? implements= Implements* '{'
		body += (Attribute | Method)*
	'}'
;
	
Attribute:
	BodyVisibility ("<>"|"<!>")? attributename = ID ":" type = ID (("[" number? "]") | )?
;

BiRelation:
	( "[" (number(".." number?)| "*") "]" "-" linkName = ID "->" "[" number? "]")
;

paramIn:
	name = ID ":" type =  ID (",")? 
;

Method:
	BodyVisibility name = ID "(" param += paramIn* ")" (":" returnType =  ID )?
;

BodyVisibility:
	"+" | "-" | "#"
;

ClassVisibility:
	"+" | "-" 
;

terminal number: 
	('0'..'9')
;

Package:
	name = ID? ("." ID)* "[["
		classType += Elements*
		subPackage += Package?
	"]]" 
;